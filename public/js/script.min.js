window.onload=function(){function a(){$("#onePlayer,#twoPlayer").on("click",function(){$(".menu").fadeOut(1e3,function(){$(".menu").hide()});var a=$(this).attr("id");return"twoPlayer"==a&&0==j?($(".gameTwoPlayer, .gameBar").delay(1e3).fadeIn(1e3,function(){$(".gameBar").show(),$(".gameTwoPlayer").show(),h="gameTwoPlayer"}),b()):"onePlayer"==a&&0==j?($(".gameOnePlayer, .gameBar").delay(1e3).fadeIn(1e3,function(){$(".gameBar").show(),$(".gameOnePlayer").show(),h="gameOnePlayer"}),b()):"twoPlayer"==a&&1==j?($(".gameTwoPlayer, .gameBar").delay(1e3).fadeIn(1e3,function(){$(".gameBar").show(),$(".gameTwoPlayer").show(),h="gameTwoPlayer"}),c()):"onePlayer"==a&&1==j&&($(".gameOnePlayer, .gameBar").delay(1e3).fadeIn(1e3,function(){$(".gameBar").show(),$(".gameOnePlayer").show(),h="gameOnePlayer"}),c()),!1})}function b(){c(),$(".gameTwoPlayer, .gameOnePlayer").on("click",function(){h=$(this).attr("class");var a=u.getElementsByTagName("p").length;m.push(l),"X"==m[m.length-1][1]?p.push(m[m.length-1][0]):"O"==m[m.length-1][1]&&q.push(m[m.length-1][0]);for(var b=0;b<t.length;b++)if(p.indexOf(t[b][0])!=-1&&p.indexOf(t[b][1])!=-1&&p.indexOf(t[b][2])!=-1||q.indexOf(t[b][0])!=-1&&q.indexOf(t[b][1])!=-1&&q.indexOf(t[b][2])!=-1)return $("."+t[b][0]+" p,."+t[b][1]+" p,."+t[b][2]+" p").css({color:"rgba(209, 171, 38, 1)","animation-duration":"400ms","animation-name":"blink","animation-iteration-count":"infinite","animation-direction":"alternate"}),$("."+h).css("color","grey"),$("#player1,#player2,#menu").hide(),$("."+h+",.gameBar").delay(1500).fadeOut(1e3,function(){$("."+h).hide(),$(".gameBar").hide()}),f?(s+=1,k.push("player2")):(r+=1,k.push("player1")),$("#score1").html(r),$("#score2").html(s),$(".score").delay(2500).fadeIn(1e3,function(){$(".score").show()}),u.style.pointerEvents="none",v.style.pointerEvents="none",!1;return console.log(a),9==a?($("."+h).css("color","grey"),$("#player1,#player2,#menu").hide(),$("."+h+",.gameBar").delay(1500).fadeOut(1e3,function(){$("."+h).hide(),$(".gameBar").hide()}),f?k.push("player2"):k.push("player1"),$("#score1").html(r),$("#score2").html(s),$(".score").delay(2500).fadeIn(1e3,function(){$(".score").show()}),!1):void("gameTwoPlayer"==h?g?e():f&&c():"gameOnePlayer"==h&&(g?d():f&&c()))})}function c(){console.log("player1"),l=[],v.style.pointerEvents="auto",setTimeout(function(){$(".col11,.col12,.col13,.col21,.col22,.col23,.col31,.col32,.col33").on("click",function(a){"<p>O</p>"!=$("."+$(this).attr("class")).html()&&"<p>X</p>"!=$("."+$(this).attr("class")).html()&&($("."+$(this).attr("class")).html("<p>X</p>"),l.push($(this).attr("class"),"X"),f=!1,g=!0,$(".col11,.col12,.col13,.col21,.col22,.col23,.col31,.col32,.col33").off("click"))})},500),$("#player2").hide(),$("#player1").fadeIn(500,function(){$("#player1").show()})}function d(){l=[],$("#scoreP2").html("Computer"),v.style.pointerEvents="none";for(var a=u.getElementsByTagName("p").length,b=0;b<t.length;b++)p[p.length-1].indexOf(t[b][0])==-1&&p[p.length-1].indexOf(t[b][1])==-1&&p[p.length-1].indexOf(t[b][2])==-1||n.push(t[b]);var d=n.filter(function(a,b,c){return b!=c.indexOf(a)}),e=o.filter(function(a,b,c){return b!=c.indexOf(a)}),j=t.filter(function(a){return n.indexOf(a)==-1}),m=p.concat(q);if(0==q.length)i="col11"==p[0]||"col13"==p[0]||"col31"==p[0]||"col33"==p[0]?"col22":j[Math.floor(Math.random()*j.length)][2],q.push(i);else if(e.length&&n.indexOf(e[e.length-1])==-1)e[e.length-1].forEach(function(a){q.indexOf(a)==-1&&(i=a)}),q.push(i);else if(d.length&&o.indexOf(d[d.length-1])==-1)d[d.length-1].forEach(function(a){p.indexOf(a)==-1&&(i=a)}),q.push(i);else{if(j.length)j[j.length-1].forEach(function(a){q.indexOf(a)==-1&&(i=a)});else{var w=[].concat.apply([],t);w.forEach(function(a){m.indexOf(a)==-1&&(i=a)})}q.push(i)}setTimeout(function(){if($("."+i).html("<p>O</p>"),f=!0,g=!1,9==a)return $("."+h).css("color","grey"),$("#player1,#player2,#menu").hide(),$("."+h+",.gameBar").delay(1500).fadeOut(1e3,function(){$("."+h).hide(),$(".gameBar").hide()}),k.push("player2"),v.style.pointerEvents="none",$("#score1").html(r),$("#score2").html(s),$(".score").delay(2500).fadeIn(1e3,function(){$(".score").show()}),!1;for(var b=0;b<t.length;b++){if(q.indexOf(t[b][0])!=-1&&q.indexOf(t[b][1])!=-1&&q.indexOf(t[b][2])!=-1)return $("."+t[b][0]+" p,."+t[b][1]+" p,."+t[b][2]+" p").css({color:"rgba(209, 171, 38, 1)","animation-duration":"400ms","animation-name":"blink","animation-iteration-count":"infinite","animation-direction":"alternate"}),$(".gameOnePlayer").css("color","grey"),$("#player1,#player2,#menu").hide(),$(".gameOnePlayer,.gameBar").delay(1500).fadeOut(1e3,function(){$(".gameOnePlayer").hide(),$(".gameBar").hide()}),f?(s+=1,k.push("player2")):(r+=1,k.push("player2")),$("#score1").html(r),$("#score2").html(s),$(".score").delay(2500).fadeIn(1e3,function(){$(".score").show()}),v.style.pointerEvents="none",!1;q[q.length-1].indexOf(t[b][0])==-1&&q[q.length-1].indexOf(t[b][1])==-1&&q[q.length-1].indexOf(t[b][2])==-1||o.push(t[b])}setTimeout(function(){c()},300)},900),$("#player2").html("Computer"),$("#player1").hide(),$("#player2").fadeIn(500,function(){$("#player2").show()})}function e(){l=[],$("#scoreP2").html("Player 2"),setTimeout(function(){$(".col11,.col12,.col13,.col21,.col22,.col23,.col31,.col32,.col33,#menu").on("click",function(a){"<p>O</p>"!=$("."+$(this).attr("class")).html()&&"<p>X</p>"!=$("."+$(this).attr("class")).html()&&(l.push($(this).attr("class"),"O"),f=!0,g=!1,$("."+$(this).attr("class")).html("<p>O</p>"),$(".col11,.col12,.col13,.col21,.col22,.col23,.col31,.col32,.col33").off("click"))})},500),$("#player2").html("Player 2"),$("#player1").hide(),$("#player2").fadeIn(500,function(){$("#player2").show()})}var f,g,h,i,j=!1,k=[],l=[],m=[],n=[],o=[],p=[],q=[],r=0,s=0,t=[["col11","col12","col13"],["col21","col22","col23"],["col31","col32","col33"],["col11","col21","col31"],["col12","col22","col32"],["col13","col23","col33"],["col11","col22","col33"],["col13","col22","col31"]],u=document.getElementsByClassName("gameTwoPlayer")[0],v=document.getElementsByClassName("gameOnePlayer")[0];$(".gameTwoPlayer").hide(),$(".gameOnePlayer").hide(),$(".gameBar").hide(),$(".score").hide(),a(),$("#menu").on("click",function(a){k=[],r=0,s=0,p=[],q=[],n=[],o=[],j=!0,$("."+h+",.gameBar").fadeOut(1e3,function(){$(".col11 p,.col12 p,.col13 p,.col21 p,.col22 p,.col23 p,.col31 p,.col32 p,.col33 p").remove(),$("."+h+",.gameBar").hide()}),$(".menu").delay(1e3).fadeIn(1e3,function(){$(".menu").show()}),$(".gameTwoPlayer,.gameOnePlayer").css("color","white"),$("#score1").html(0),$("#score2").html(0),a.stopPropagation()}),$("#new").on("click",function(){p=[],q=[],n=[],o=[],$(".score").fadeOut(1e3,function(){$(".score").hide()}),$(".col11 p,.col12 p,.col13 p,.col21 p,.col22 p,.col23 p,.col31 p,.col32 p,.col33 p").remove(),$(".gameOnePlayer").css("color","white"),$(".gameTwoPlayer").css("color","white"),$("#menu").show(),$("."+h+",.gameBar").delay(1e3).fadeIn(1e3,function(){$("."+h).show(),$(".gameBar").show(),"player1"==k[k.length-1]&&"gameTwoPlayer"==h?(e(),u.style.pointerEvents="auto"):"player2"==k[k.length-1]?(c(),u.style.pointerEvents="auto",v.style.pointerEvents="auto"):"player1"==k[k.length-1]&&"gameOnePlayer"==h&&(c(),u.style.pointerEvents="auto",v.style.pointerEvents="auto")})})};